<!DOCTYPE html>
<html>
<head>
    <title>Survey Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        h1 {
            text-align: center;
        }

        /* 设置 Name、Email 和 Organization 输入框宽度 */
        input[name="Name"],
        input[name="Email"],
        input[name="Organization"] {
            width: 50%; /* 设置输入框宽度为 50% */
            font-size: 16px; /* 设置字体大小为16像素 */
            font-weight: bold; /* 使用粗体字体 */
            border: none; /* 去掉输入框边框 */
            border-bottom: 1px solid gray; /* 下划线样式 */
        }

        /* 为下划线输入框添加一些间距 */
        .underline-input {
            margin-bottom: 20px;
        }

        /* 修改用户信息处理声明的样式 */
        #userInformationStatement {
            font-size: 14px; /* 设置字体大小为14像素 */
            font-family: Arial, sans-serif; /* 更换字体为Arial或sans-serif备选字体 */
            color: #888; /* 使用灰色文本颜色 */
            font-style: italic; /* 使用斜体字体 */
        }

        h3 {
            text-align: center; /* 让标题居中显示 */
        }

        /* 保留 "reason" 输入框的原始大小 */
        textarea[name="Reason"] {
            width: 100%; /* 设置宽度为100% */
            height: 100px; /* 保持原始高度 */
        }
    </style>
</head>

<body>
    <h1>User Survey</h1> <!-- 添加标题并居中显示 -->
    <form id="surveyForm">
        <!-- 下划线样式的输入框 -->
        <div class="underline-input">
            <label for="Name">Name:</label>
            <input type="text" id="Name" name="Name">
        </div>

        <div class="underline-input">
            <label for="Email">Email:</label>
            <input type="text" id="Email" name="Email">
        </div>

        <div class="underline-input">
            <label for="Organization">Organization:</label>
            <input type="text" id="Organization" name="Organization">
        </div>

        <p>Please specify where and how you intend to utilize our datasets:</p>
        <textarea name="Reason"></textarea> <!-- 保留原有的文本框 -->
        <button type="submit">Submit Survey</button>
    </form>

    <script>
        document.getElementById('surveyForm').addEventListener('submit', function(e) {
            console.log("表单正在提交");  // 调试信息
            e.preventDefault();

            // 检查所有字段是否已填写
            var formData = new FormData(document.getElementById('surveyForm'));
            var isFormComplete = true;

            for (var [key, value] of formData.entries()) {
                if (value.trim() === '') {
                    alert(key + ' is required');
                    isFormComplete = false;
                    break;
                }
            }

            if (isFormComplete) {
                // 发送数据到服务器
                fetch('http://127.0.0.1:5000/submit-survey', {
                    method: 'POST',
                    body: formData
                }).then(response => {
                    if (response.ok) {
                        // 成功后跳转到下载页面
                        window.location.href = 'http://127.0.0.1:5000/static/download-link.html';
                    } else {
                        alert('Failed to submit survey');
                    }
                }).catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred');
                });
            }
        });
    </script>

    <!-- 添加用户信息处理声明 -->
    <div id="userInformationStatement">
        <h3>User Information Processing Statement</h3>
        <p>Welcome to our website! We value your privacy and the protection of your personal information. When you use our services and submit personal information, we will process your information as follows:</p>
        <p>Information Collection: We only collect personal information necessary to provide our services, such as your name, email address, and contact details.</p>
        <p>Use of Information: Your personal information will be used for the following purposes: to provide and improve our services, customer support, communication with you, website administration, and other uses permitted or required by law.</p>
        <p>Sharing and Disclosure of Information: We will not share your personal information with third parties unless we have your explicit consent or it is necessary for providing our services or required by law.</p>
        <p>Data Security: We take appropriate security measures to protect your personal information from unauthorized access and disclosure.</p>
        <p>User Rights: You have the right to access, correct, or delete your personal information, and in certain circumstances, to restrict or object to the processing of your information.</p>
        <p>Policy Updates: We may update this statement to reflect changes in our policies. We encourage users to regularly review this page for the latest information.</p>
        <p>Contact Information: If you have any questions about how we process your personal information, please contact us at [contact information].</p>
        <p>By continuing to use our website, you acknowledge and agree to this statement.</p>
    </div>

</body>
</html>
